// Plugin-specific config protos for StepControllers.

syntax = "proto3";

package nighthawk.adaptive_load;

import "api/adaptive_load/input_variable_setter.proto";
import "api/adaptive_load/step_controller.proto";

// Configuration for a step controller that performs an exponential search for
// the optimal value of a single Nighthawk input variable (e.g. RPS).
// Exponential search starts with the input set to |initial_value| and increases
// the input by |exponential_factor| until a metric fails the threshold at some
// input X, then performs a binary search with input values between
// (X/exponential_factor) and X.
message ExponentialSearchStepControllerConfig {
  // Selects a plugin that knows how to apply a numeric value generated by the
  // StepController within CommandLineOptions. The default is the "rps" plugin
  // that sets |requests_per_second| in CommandLineOptions.
  InputVariableSetterConfig input_variable_setter = 1;
  // Initial value of the input variable that should be attempted.
  double initial_value = 2;
  // Factor to increase the input variable during the exponential phase. Typical
  // value: 2.0.
  double exponential_factor = 3;
}
